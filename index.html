<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zahid first website</title>
  <style>
    /* Base styling from before plus additions */
    * {
      box-sizing: border-box;
      margin: 0; padding: 0;
    }
    body, html {
      height: 100%;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: #fff;
      color: #333;
    }
    .page-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px 30px;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-bottom: 20px;
      border-bottom: 1px solid #eee;
    }
    .logo {
      font-weight: 700;
      font-size: 28px;
      color: #58cc02;
      font-family: 'Arial Black', Arial, sans-serif;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: default;
    }
    .logo svg {
      height: 36px;
    }
    .language-select {
      font-size: 14px;
      color: #999;
      cursor: pointer;
      user-select: none;
      position: relative;
    }
    main {
      margin-top: 40px;
      min-height: 400px;
    }
    .center-content {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 50px;
      flex-wrap: wrap;
    }
    .left-image img {
      max-width: 280px;
      height: auto;
    }
    .right-content {
      max-width: 480px;
    }
    .right-content h1 {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 30px;
      color: #444;
      line-height: 1.3;
    }
    button {
      padding: 15px 0;
      font-size: 18px;
      font-weight: 600;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      width: 100%;
      max-width: 320px;
      margin-bottom: 12px;
      transition: background-color 0.3s ease;
    }
    .btn-get-started {
      background-color: #58cc02;
      color: white;
    }
    .btn-get-started:hover {
      background-color: #47a001;
    }
    .btn-login {
      background-color: white;
      border: 2px solid #ccc;
      color: #3498db;
      font-weight: 700;
    }
    .btn-login:hover {
      border-color: #3498db;
      background-color: #f0f8ff;
    }
    /* Form styles */
    form {
      max-width: 400px;
      margin-top: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    label {
      font-weight: 600;
      margin-bottom: 5px;
    }
    input[type="email"], input[type="password"], textarea {
      padding: 10px;
      font-size: 16px;
      border-radius: 6px;
      border: 1px solid #ccc;
      width: 100%;
      resize: vertical;
    }
    textarea {
      min-height: 100px;
    }
    .post-button {
      background-color: #58cc02;
      color: white;
      border: none;
      font-weight: 700;
      padding: 12px;
      border-radius: 6px;
      cursor: pointer;
      width: 150px;
      align-self: flex-start;
    }
    .post-button:hover {
      background-color: #47a001;
    }
    .posts {
      margin-top: 30px;
      max-width: 480px;
    }
    .post {
      background: #f7fef8;
      border-left: 5px solid #58cc02;
      margin-bottom: 15px;
      padding: 12px 15px;
      border-radius: 6px;
      font-size: 16px;
      color: #2a5f15;
      white-space: pre-wrap;
      position: relative;
    }
    .post img {
      max-width: 100%;
      margin-top: 8px;
      border-radius: 6px;
    }
    .welcome-msg {
      font-size: 20px;
      margin-bottom: 20px;
      color: #444;
    }
    .logout-btn, .back-btn {
      margin-top: 10px;
      max-width: 120px;
      font-weight: 700;
      border-radius: 6px;
      cursor: pointer;
      padding: 10px;
      border: none;
      color: white;
      background-color: #e44;
      transition: background-color 0.3s ease;
    }
    .logout-btn:hover, .back-btn:hover {
      background-color: #b22;
    }
    .back-btn {
      background-color: #999;
      margin-left: 10px;
    }
    .back-btn:hover {
      background-color: #666;
    }
    .delete-post-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #e44;
      border: none;
      color: white;
      font-weight: 700;
      border-radius: 50%;
      width: 28px;
      height: 28px;
      cursor: pointer;
      font-size: 18px;
      line-height: 18px;
      text-align: center;
      padding: 0;
      transition: background-color 0.3s ease;
    }
    .delete-post-btn:hover {
      background-color: #b22;
    }
    .profile-nav {
      margin-bottom: 20px;
      display: flex;
      gap: 10px;
    }
    .profile-nav button {
      width: auto;
      padding: 8px 15px;
      background-color: #58cc02;
      border: none;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 700;
      transition: background-color 0.3s ease;
    }
    .profile-nav button:hover {
      background-color: #47a001;
    }
    .username-link {
      font-weight: 700;
      color: #3498db;
      cursor: pointer;
      user-select: none;
      text-decoration: underline;
    }
    .status-area {
      margin: 12px 0 20px;
      font-style: italic;
      color: #666;
    }
    .status-edit {
      margin-top: 8px;
    }
    .status-edit textarea {
      width: 100%;
      font-style: normal;
      font-size: 16px;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
      resize: vertical;
      min-height: 60px;
    }
    .status-edit button {
      margin-top: 6px;
      background-color: #58cc02;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      font-weight: 700;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .status-edit button:hover {
      background-color: #47a001;
    }
    .users-list {
      margin-bottom: 25px;
      max-width: 480px;
    }
    .users-list h3 {
      margin-bottom: 12px;
    }
    .users-list ul {
      list-style: none;
    }
    .users-list li {
      margin-bottom: 8px;
    }
    .users-list li .username-link {
      text-decoration: none;
      color: #2c7;
      font-weight: 700;
      cursor: pointer;
    }
    .users-list li .username-link:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="page-container">

    <header>
      <div class="logo" aria-label="Duolingo Logo">
        <svg viewBox="0 0 24 24" fill="#58cc02" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
          <path d="M12 2C7.58 2 4 5.58 4 10c0 3.46 2.47 6.43 5.87 6.93v3.07h2.25v-3.07C17.53 16.43 20 13.46 20 10c0-4.42-3.58-8-8-8zM7 11a1 1 0 110-2 1 1 0 010 2zm5 7.25h-2v-2.22c-.74-.08-1.5-.4-2.11-1l1.41-1.41c.33.35.77.59 1.25.65V18zm6-7.25a1 1 0 110-2 1 1 0 010 2z"/>
        </svg>
        Welcome Zahid!
      </div>
      <div class="language-select" title="Language selection">English</div>
    </header>

    <main id="contentArea">
      <!-- content will be injected here -->
    </main>
  </div>

  <script>
    const contentArea = document.getElementById('contentArea');

    // Users data array - simulating DB
    let users = [];
    let loggedInUser = null;

    // Show initial landing page
    function showLandingPage() {
      contentArea.innerHTML = `
        <div class="center-content">
          <div class="left-image">
            <img src="https://cdn-icons-png.flaticon.com/512/4825/4825194.png" alt="Language Illustration" />
          </div>
          <div class="right-content">
            <h1>Learn a new language, the fun way.</h1>
            <button id="getStartedBtn" class="btn-get-started">Get Started</button>
            <button id="loginBtn" class="btn-login">Login</button>
          </div>
        </div>
      `;
      document.getElementById('getStartedBtn').onclick = showAuthOptions;
      document.getElementById('loginBtn').onclick = showLoginForm;
    }

    // Show auth options after Get Started
    function showAuthOptions() {
      contentArea.innerHTML = `
        <div>
          <h2>Choose an option</h2>
          <button id="loginOptionBtn" class="btn-login">Login</button>
          <button id="signupOptionBtn" class="btn-get-started">Sign Up</button>
          <button id="backBtn" class="back-btn">Back</button>
        </div>
      `;
      document.getElementById('loginOptionBtn').onclick = showLoginForm;
      document.getElementById('signupOptionBtn').onclick = showSignupForm;
      document.getElementById('backBtn').onclick = showLandingPage;
    }

    // Signup form
    function showSignupForm() {
      contentArea.innerHTML = `
        <h2>Sign Up</h2>
        <form id="signupForm">
          <label for="signupEmail">Email:</label>
          <input type="email" id="signupEmail" required />
          <label for="signupPassword">Password:</label>
          <input type="password" id="signupPassword" required />
          <button type="submit" class="btn-get-started">Sign Up</button>
          <button type="button" id="backBtn" class="back-btn">Back</button>
        </form>
      `;
      document.getElementById('signupForm').addEventListener('submit', e => {
        e.preventDefault();
        const email = document.getElementById('signupEmail').value.trim();
        const password = document.getElementById('signupPassword').value.trim();
        if (!validateEmail(email)) return alert('Invalid email format.');
        if (password.length < 6) return alert('Password must be at least 6 characters.');

        if (users.find(u => u.email === email)) return alert('Email already registered.');

        const newUser = {
          id: generateUserId(),
          email,
          password,
          posts: [],
          status: '',
        };
        users.push(newUser);
        alert(`Account created! Your ID: ${newUser.id}`);
        loggedInUser = newUser;
        showDashboard();
      });
      document.getElementById('backBtn').onclick = showAuthOptions;
    }

    // Login form
    function showLoginForm() {
      contentArea.innerHTML = `
        <h2>Login</h2>
        <form id="loginForm">
          <label for="loginEmail">Email:</label>
          <input type="email" id="loginEmail" required />
          <label for="loginPassword">Password:</label>
          <input type="password" id="loginPassword" required />
          <button type="submit" class="btn-get-started">Login</button>
          <button type="button" id="backBtn" class="back-btn">Back</button>
        </form>
      `;
      document.getElementById('loginForm').addEventListener('submit', e => {
        e.preventDefault();
        const email = document.getElementById('loginEmail').value.trim();
        const password = document.getElementById('loginPassword').value.trim();

        const user = users.find(u => u.email === email && u.password === password);
        if (!user) return alert('Incorrect email or password.');

        loggedInUser = user;
        showDashboard();
      });
      document.getElementById('backBtn').onclick = showAuthOptions;
    }

    // Validate email simple regex
    function validateEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    // Generate random ID string for users
    function generateUserId() {
      return 'user-' + Math.random().toString(36).substr(2, 9);
    }

    // Show Dashboard with posts, post form, nav buttons, users list
    function showDashboard() {
      contentArea.innerHTML = `
        <div>
          <div class="welcome-msg">Welcome, <strong class="username-link" data-userid="${loggedInUser.id}">${loggedInUser.email}</strong>!</div>
          <div style="margin-bottom: 15px;">
            <button id="profileBtn" class="profile-nav-btn">My Profile</button>
            <button id="usersListBtn" class="profile-nav-btn">Users List</button>
            <button id="logoutBtn" class="logout-btn">Logout</button>
          </div>

          <form id="postForm" style="max-width: 480px;">
            <label for="postText">Write something:</label>
            <textarea id="postText" placeholder="What's on your mind?" required></textarea>
            <label for="postImage">Attach image (optional):</label>
            <input type="file" id="postImage" accept="image/*" />
            <button type="submit" class="post-button">Post</button>
          </form>

          <div class="posts" id="postsContainer"></div>
        </div>
      `;

      // Make usernames clickable
      document.querySelectorAll('.username-link').forEach(el => {
        el.onclick = () => showUserProfile(loggedInUser.id);
      });

      // Listeners
      document.getElementById('logoutBtn').onclick = () => {
        loggedInUser = null;
        alert("Logged out successfully!");
        showLandingPage();
      };
      document.getElementById('profileBtn').onclick = () => showUserProfile(loggedInUser.id);
      document.getElementById('usersListBtn').onclick = showUsersList;

      document.getElementById('postForm').addEventListener('submit', e => {
        e.preventDefault();
        const text = document.getElementById('postText').value.trim();
        const imageInput = document.getElementById('postImage');
        if (!text && imageInput.files.length === 0) {
          alert('Please add text or an image to post.');
          return;
        }
        if (imageInput.files.length > 0) {
          const file = imageInput.files[0];
          const reader = new FileReader();
          reader.onload = function(event) {
            addPost(text, event.target.result);
          };
          reader.readAsDataURL(file);
        } else {
          addPost(text, null);
        }
      });

      renderPosts(loggedInUser);
    }

    // Add post for loggedInUser and refresh posts
    function addPost(text, image) {
      loggedInUser.posts.unshift({ text, image, userId: loggedInUser.id });
      document.getElementById('postText').value = '';
      document.getElementById('postImage').value = '';
      renderPosts(loggedInUser);
    }

    // Render posts for a given user, with clickable username links, delete buttons if owner
    function renderPosts(user) {
      const postsContainer = document.getElementById('postsContainer');
      postsContainer.innerHTML = '';

      if (user.posts.length === 0) {
        postsContainer.innerHTML = '<p>No posts yet.</p>';
        return;
      }

      user.posts.forEach((post, idx) => {
        const postDiv = document.createElement('div');
        postDiv.classList.add('post');

        let contentHtml = '';
        if (post.text) contentHtml += `<div>${escapeHtml(post.text)}</div>`;
        if (post.image) contentHtml += `<img src="${post.image}" alt="Posted Image" />`;

        // Show username clickable (always user)
        contentHtml = `<div><span class="username-link" data-userid="${user.id}">${user.email}</span></div>` + contentHtml;
        postDiv.innerHTML = contentHtml;

        // If owner, allow delete button
        if (loggedInUser && loggedInUser.id === user.id) {
          const deleteBtn = document.createElement('button');
          deleteBtn.classList.add('delete-post-btn');
          deleteBtn.title = "Delete post";
          deleteBtn.textContent = '×';
          deleteBtn.onclick = () => {
            if(confirm("Delete this post?")) {
              user.posts.splice(idx, 1);
              renderPosts(user);
            }
          };
          postDiv.appendChild(deleteBtn);
        }

        // Clicking username shows profile
        postDiv.querySelectorAll('.username-link').forEach(el => {
          el.onclick = () => {
            const uid = el.getAttribute('data-userid');
            showUserProfile(uid);
          };
        });

        postsContainer.appendChild(postDiv);
      });
    }

    // Escape HTML safe
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.appendChild(document.createTextNode(text));
      return div.innerHTML;
    }

    // Show users list page
    function showUsersList() {
      contentArea.innerHTML = `
        <div class="users-list">
          <h3>All Users</h3>
          <ul id="usersListUL"></ul>
          <button id="backBtn" class="back-btn">Back</button>
        </div>
      `;
      const ul = document.getElementById('usersListUL');
      users.forEach(u => {
        const li = document.createElement('li');
        li.innerHTML = `<span class="username-link" data-userid="${u.id}">${u.email}</span>`;
        li.querySelector('.username-link').onclick = () => showUserProfile(u.id);
        ul.appendChild(li);
      });

      document.getElementById('backBtn').onclick = showDashboard;
    }

    // Show profile page by user id
    function showUserProfile(userId) {
      const user = users.find(u => u.id === userId);
      if (!user) {
        alert("User not found.");
        showDashboard();
        return;
      }

      contentArea.innerHTML = `
        <div>
          <div class="profile-nav">
            <button id="backBtn">Back</button>
            ${loggedInUser ? `<button id="logoutBtn">Logout</button>` : ''}
          </div>
          <h2>Profile</h2>
          <p><strong>Email:</strong> ${user.email}</p>
          <div class="status-area" id="statusArea">${escapeHtml(user.status || '(No status)')}</div>
          ${loggedInUser && loggedInUser.id === user.id ? `
            <div class="status-edit">
              <textarea id="statusEdit" placeholder="Update your status...">${escapeHtml(user.status || '')}</textarea>
              <button id="saveStatusBtn">Save Status</button>
            </div>
          ` : ''}
          <h3>Posts by ${user.email}</h3>
          <div class="posts" id="profilePostsContainer"></div>
        </div>
      `;

      renderProfilePosts(user);

      document.getElementById('backBtn').onclick = () => {
        // If viewing own profile, go dashboard else users list or dashboard
        if (loggedInUser && loggedInUser.id === user.id) {
          showDashboard();
        } else {
          showUsersList();
        }
      };

      if (loggedInUser) {
        document.getElementById('logoutBtn').onclick = () => {
          loggedInUser = null;
          alert("Logged out successfully!");
          showLandingPage();
        };
      }

      if (loggedInUser && loggedInUser.id === user.id) {
        document.getElementById('saveStatusBtn').onclick = () => {
          const newStatus = document.getElementById('statusEdit').value.trim();
          user.status = newStatus;
          alert("Status updated!");
          showUserProfile(user.id);
        };
      }
    }

    // Render posts on profile page for specific user
    function renderProfilePosts(user) {
      const container = document.getElementById('profilePostsContainer');
      container.innerHTML = '';

      if (user.posts.length === 0) {
        container.innerHTML = '<p>No posts yet.</p>';
        return;
      }

      user.posts.forEach(post => {
        const postDiv = document.createElement('div');
        postDiv.classList.add('post');

        let contentHtml = '';
        if (post.text) contentHtml += `<div>${escapeHtml(post.text)}</div>`;
        if (post.image) contentHtml += `<img src="${post.image}" alt="Posted Image" />`;

        postDiv.innerHTML = contentHtml;
        container.appendChild(postDiv);
      });
    }

    // Start app
    showLandingPage();
  </script>
</body>
</html>
